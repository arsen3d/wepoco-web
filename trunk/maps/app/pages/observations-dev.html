<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Wepoco: Observations (dev vn)</title>
<link rel="stylesheet" href="http://www.wepoco.com/wepoco-look/banner.css" type="text/css" media="screen, projection" />
<link rel="stylesheet" href="observations.css" type="text/css" media="screen, projection" />

<script src="http://maps.google.com/maps?file=api&v=2&key=ABQIAAAAF5oUqxaWkq3HzHxEjwFoMhSqLCR4vqZD7ui-J2nkp63kVD9LDRS75VKmRTRVCob68yw1NBkMXZHKsg" type="text/javascript"></script>
<script type="text/javascript" src="observations-dev.js"></script>
<script type="text/javascript" src="wCalendarDateInput.js">
/***********************************************
* A slightly modified (by Michael Saunby for Wepoco) version of the following -
*
* Jason's Date Input Calendar- By Jason Moon http://calendar.moonscript.com/dateinput.cfm
* Script featured on and available at http://www.dynamicdrive.com
* Keep this notice intact for use.
* 
* The modification is to call a function when the date is changed.
***********************************************/
/*
 * 24hr satellite rainfall estimates are generated at midnight so
 * set default date to yesterday.
 */
</script>
<script type="text/javascript">
yesterdate = new Date();
yesterdate.setDate(yesterdate.getDate()-1);
year = '' + yesterdate.getFullYear();
/* month is 0-11 !! */ 
month = '' + (yesterdate.getMonth() + 1);
if(month.length < 2){ month = '0' + month; }
date = '' +  (yesterdate.getDate());
if(date.length < 2){ date = '0' + date; }
var yesterday = year+month+date;
/* for NDVI use last month */
today =  new Date();
y = today.getFullYear();
m = today.getMonth();
if( m == 0){
  m = 12;
  y = y - 1;
}
year = '' + y;
month = '' + m;
if(month.length < 2){ month = '0' + month; }
var lastmonth = year+month+'01';

function checkSelections()
{
  // Check type and date for each map layer that's enabled.
  var info = "";
  var raintype = null; var raindate = null;
  var ndvitype = null; var ndvidate = null;

  raindate = "20090107";
  raintype="day";
  NdviAndRainLoad(ndvitype,ndvidate,raintype,raindate);
  loadRainInfo( "/latestrain" );
}

function loadRainInfo( infoURL ){
     GDownloadUrl(infoURL, function(data, responseCode) {
     xml=GXml.parse(data);
     date = xml.documentElement.getElementsByTagName("date");
     // Do something!!
     dateinp = document.getElementById("dateinp");
     dateinp.value = date[0].childNodes[0].data;
  }); 
} 

</script>
</head>
<body onload="checkSelections();setupNDVI();" onunload="saveLocation();GUnload()">
<div id="container">

<script type="text/javascript" language="javascript">
   function minimize(){
    hdr=document.getElementById("header");
    hdr.style.height = "2px";
    hdr.style.visibility = "hidden";
   }
   function maximize(){
    hdr=document.getElementById("header");
    hdr.style.height = "130px";
    hdr.style.visibility = "visible";
   }
</script>
<div style="position:absolute; right:0; top:0; z-index:3; cursor:pointer">
  <a style="background-color:white;color:black;border:1px solid black;
     padding:2px; font:small Arial; marginBottom:3px" onclick="minimize()">min</a>
  <a style="background-color:white;color:black;border:1px solid black;
     padding:2px; font:small Arial; marginBottom:3px" onclick="maximize()">max</a> 
</div>
<div id="header" style=
     "background:#FFFFff;width:660px;height:130px;margin-top:0;border:0;padding:0;left:0;position:relative;">
     <div id="wepoco">
       <img alt="wepoco: making weather and climate information useful "
       src="http://www.wepoco.com/wepoco-look/logo_small_text30_circ.gif" style="width:531px; height:130px;" />
     </div>

</div><!-- header -->

<div style="position:relative;background:#FFFFFF;width:660px;height:580px;padding:20px;margin-top:0">

<div>
<form>
<input id="dateinp" type="text" name="zzz" value="1066"/>
</form>
</div>

<!-- the actual map -->
<div id="map" class="map-box" style="margin:0">
</div>

</div>

</div> <!-- container -->
</body>
</html>
