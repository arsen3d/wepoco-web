<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Wepoco: map-grid</title>
<script src="http://maps.google.com/maps?file=api&v=2&key=ABQIAAAAF5oUqxaWkq3HzHxEjwFoMhSqLCR4vqZD7ui-J2nkp63kVD9LDRS75VKmRTRVCob68yw1NBkMXZHKsg" type="text/javascript"></script>

<script type="text/javascript" language="javascript">

var map = null;
var custommap1;
var custommap2;

// callback for radio buttons
function checkrad(value) {
  if(value == "1"){
    map.setMapType(custommap1);
  }else{
    map.setMapType(custommap2);
  }
}

function setupMap() {

  map = new GMap2(document.getElementById("map"), 
    {draggableCursor: 'crosshair'});
  map.addControl(new GLargeMapControl());
  map.addControl(new GScaleControl());

  var gridlayer1 = new GTileLayer(new GCopyrightCollection(""),3,5);
  var gridlayers1 = [
                    G_NORMAL_MAP.getTileLayers()[0],
                    gridlayer1
                   ];
  var gridlayer2 = new GTileLayer(new GCopyrightCollection(""),3,5);
  var gridlayers2 = [
                    G_NORMAL_MAP.getTileLayers()[0],
                    gridlayer2
                   ];

  gridlayer1.getTileUrl = function(a,b){
    var base_el = document.getElementById('base');
    var prefix_el = document.getElementById('prefix1');
    return base_el.value+prefix_el.value+"/"+b+"/"+a.x+"_"+a.y+".png";
  }
  gridlayer2.getTileUrl = function(a,b){
    var base_el = document.getElementById('base');
    var prefix_el = document.getElementById('prefix2');
    return base_el.value+prefix_el.value+"/"+b+"/"+a.x+"_"+a.y+".png";
  }

  gridlayer1.isPng = function() {return 1;}
  gridlayer1.getCopyright = function(a,b) {
    return { prefix: "", copyrightTexts:[""]};
  }
  gridlayer2.isPng = function() {return 1;}
  gridlayer2.getCopyright = function(a,b) {
    return { prefix: "", copyrightTexts:[""]};
  }
    
  custommap1 = new GMapType(gridlayers1, G_SATELLITE_MAP.getProjection(), 
    "Wepoco", {errorMessage:_mMapError});    
  custommap2 = new GMapType(gridlayers2, G_SATELLITE_MAP.getProjection(), 
    "Wepoco", {errorMessage:_mMapError});    

  map.addMapType(custommap1);
  map.addMapType(custommap2);
  map.setCenter(new GLatLng(10.0, 16.0), 3, custommap1);

  GEvent.addListener(map, "click", 
		   function(marker, point) {
		     var info_div = document.getElementById('info');
                     el = document.createElement('p');
                     el.appendChild(document.createTextNode(
                        point.lat().toFixed(4) + "N " + 
                        point.lng().toFixed(4) + "E"));
                     info_div.appendChild(el);
                     return;
		   }
  );
  return;
}
</script>

<style type="text/css">

.map-box {
   position: absolute;
   margin-left: 0px;
   margin-top: 5px;
   width: 630px;
   height: 380px;
   background-color: gray;
}

.map-info {
   position: absolute;
   overflow: auto;
   margin-left: 640px;
   margin-top: 5px;
   background-color: gray;
   width: 200px;
   height: 380px;
   font-family: courier;
   font-size: 10pt;
   color: black;
}

</style>
</head>
<body onload="setupMap()" onunload="GUnload()">
<div>
<form>
<table>
<tbody>
<tr>
<td>URL base</td><td><input id="base" value="http://wepoco.s3.amazonaws.com/" /></td>
<td>(leave blank for local directory)</td>
<tr>
<td>overlay 1</td>
<td><input id="prefix1" value="map" /></td>
<td><input type="radio" onclick="checkrad(this.value)" name="ovlrad" value="1" checked="checked"/></td>
</tr>
<tr>
<td>overlay 2</td>
<td><input id="prefix2" value="map" /></td>
<td><input type="radio" onclick="checkrad(this.value)" name="ovlrad" value="2"/></td>
</tr>
</tbody>
</table>
</form>
</div>

<div style="position:relative;background:#FFFFFF;width:660px;height:580px;padding:20px;margin-top:0">

   <div id="map" class="map-box">
   </div>

   <div id="info" class="map-info">
   </div>

</div>
</body>
</html>
